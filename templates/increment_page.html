<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Increment</title>
    <script
            src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>

</head>
<body bgcolor="#ffe4c4">
<div align="center">
    <h1><label for="number" class="sr-only"> Counter</label></h1>
    <div id="result" style="font-size: x-large">
        {{ count_obj.increment }}

    </div>
    <div class="add-row">
        <button type="button" id="increment">Press to increase</button>

        <button type="button" id="decrement"> Press to decrease</button>
    </div>
    <div>

        Access Details:
        {% if count_obj %}
            <ol>
            <li>
                {% for count  in records %}
                    {{ count.username }} {{ count.action_type }}{{ count.time }}

                {% endfor %}
            </li>

        {% endif %}



        </ol>
        <button type="button" id="greater_values">Count > 10</button>
        <button type="button" id="lesser_values">Count < 10</button>
        <button type="button" id="only-incremented">Only Incremented</button>
        <button type="button" id="only-decremented">Only Decremented</button>
    </div>
    <div id="grt">
        <p>
            greater numbers:

        </p>
    </div>
    <div id="lsr">
        <p>
            lesser number:
        </p>
    </div>
    <div id ="incremented">
        <p>
        only incremented number:
        </p>
    </div>
    <div id="decremented">
        <p>
            only decremented number:
        </p>
    </div>
</div>





</body>
</html>
<script>
    var countId = "{{ count_obj.id }}";
    var countID = "{{ count_obj.id }}";
    var userId = "{{ user.id }}";


    $("#increment").click(function (evt) {
        $.ajax({
            url: '/practice/'+countId+'/',
            method: 'post',
            success: function (response) {
                $("#result").html(response.count);
            },
            error: function(response){
                alert("there was an error!!");
            }
        })
    });
    $("#increment").click(function(){
        $.ajax({
            url:'/userdetail/'+userId+'/',
            method:'post',
            success: function (response) {
                var result = response.user + " incremented at " + response.time +".<br>";
                $("ol").append(result);
            }
        })
    });
    $("#decrement").click(function(){
        $.ajax({
            url:'/reverse/'+countID+'/',
            method:'post',
            success: function (response) {
                $("#result").html(response.count);

            },
            error:function (response) {
                alert("there was an error!!");

            }
        })
    });
    $("#decrement").click(function () {
        $.ajax({
            url:'/userdetail/'+userId+'/',
            method:'post',
            success: function (response){
                var result = response.user+" decremented at "+response.time+".<br>";
                $('ol').append(result);
            },
            error:function (response) {
                alert("there is some error")

            }
        })

    });
    $("#greater_values").click(function () {
        $.ajax({
            url: '/arrangement/',
            method: 'post',
            success: function (response) {
                var result = response.greater;
                for(i=0;i<result.length;i++){$('#grt').append(result[i]["value"]+"<br>")}
            },
            error: function (response) {
                alert("error")

            }

        });
        $("#lesser_values").click(function () {
            $.ajax(
                {
                    url:'/arrangement/',
                    method:'post',
                    success: function (response) {
                        var result = response.lesser;
                        for(i=0;i<result.length;i++){$('#lsr').append(result[i]["value"]+"<br>")}


                    },
                    error: function (response) {
                        alert("error")

                    }
                }
            )
        })

    });
    $("#only-incremented").click(function () {
        $.ajax({
                url:'/inc_sorting/',
                method:'post',
                success: function (response) {
                    var res = response.result;
                    for(i=0;i<res.length;i++){ $('#incremented').append(res[i]["countid"]+" id is "+res[i]["action_type"])};





                },
            error: function (response) {
                    alert("error")

            }
            }
        )

    })
     $("#only-decremented").click(function () {
        $.ajax({
                url:'/dec_sorting/',
                method:'post',
                success: function (response) {
                    var res = response.results;
                    for(i=0;i<res.length;i++){ $('#decremented').append(res[i]["countid"]+" "+res[i]["action_type"]);}



                },
            error: function (response) {
                    alert("error")

            }
            }
        )

    })

</script>